---
import BaseLayout from '../../layouts/BaseLayout.astro'

const ACCESS_KEY = 'spa2026'
const ISSUE_DATE = new Date('2026-01-17')
const VALID_DAYS = 15

const clientName = 'Casa Spa – San Pedro de la Paz'
const projectName = 'Sitio web y campañas Google Ads'

const formatDateCL = (d) =>
  d.toLocaleDateString('es-CL', { year: 'numeric', month: 'long', day: 'numeric' })

const expiresAt = new Date(ISSUE_DATE)
expiresAt.setDate(expiresAt.getDate() + VALID_DAYS)
---

<BaseLayout
  title={`Cotización – Casa Spa San Pedro | Kümera`}
  description="Propuesta de sitio web y campañas Google Ads preparada por Kümera para Casa Spa San Pedro de la Paz."
  canonical="https://www.kumeraweb.com/cotizaciones/spa-sanpedro"
  noindex={true}
>
  <div class="relative min-h-screen bg-white">
    <div
      id="access-overlay"
      class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-6 backdrop-blur"
    >
      <div class="w-full max-w-lg rounded-[18px] bg-white p-8 text-center shadow-[0_22px_45px_rgba(0,0,0,0.12)]">
        <p class="text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-black/50">
          Propuesta privada
        </p>
        <h1 class="mt-3 font-['Space_Grotesk'] text-2xl text-black">Cotización – {clientName}</h1>
        <p class="mt-3 text-sm text-black/70">
          Esta propuesta fue preparada especialmente para su proyecto. Ingrese la clave de acceso
          para visualizarla.
        </p>

        <p id="expired-msg" class="mt-4 hidden text-sm text-red-600">
          Esta cotización ya no se encuentra disponible.
        </p>

        <input
          id="access-input"
          type="password"
          placeholder="Clave de acceso"
          autocomplete="off"
          class="mt-6 w-full rounded-xl border border-black/10 px-4 py-3 text-sm"
        />
        <button
          id="access-btn"
          class="mt-3 w-full rounded-full bg-black px-5 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:opacity-90"
        >
          Acceder
        </button>

        <p id="access-error" class="mt-4 hidden text-sm text-red-600">Clave incorrecta</p>
      </div>
    </div>

    <section id="quote-content" class="mx-auto w-full max-w-[1120px] px-6 py-16 blur-sm md:py-24">
      <section class="space-y-3">
        <p class="text-xs font-semibold uppercase tracking-[0.26em] text-black/40">
          Cotización preliminar
        </p>
        <h1 class="font-['Space_Grotesk'] text-3xl tracking-tight text-black md:text-4xl">
          Diseño de sitio web y Google Ads para casa-spa
        </h1>
        <p class="max-w-2xl text-sm text-black/70 md:text-base">
          Propuesta enfocada en arriendos diarios, con formulario de contacto, enlace a Booking y
          Google Ads como canal principal de captación.
        </p>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Información general</h2>
        <ul class="space-y-2 text-sm text-black/70">
          <li><strong>Cliente:</strong> {clientName}</li>
          <li><strong>Proyecto:</strong> {projectName}</li>
          <li><strong>Proveedor:</strong> Kümera – Servicios Digitales</li>
          <li><strong>Fecha de emisión:</strong> {formatDateCL(ISSUE_DATE)}</li>
          <li>
            <strong>Validez:</strong> {VALID_DAYS} días (hasta {formatDateCL(expiresAt)})
          </li>
        </ul>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Alcance del proyecto</h2>
        <ul class="list-disc space-y-2 pl-5 text-sm text-black/70">
          <li>Sitio web responsive (desktop y mobile).</li>
          <li>
            Hasta <strong>5 secciones</strong>: Inicio, Experiencia, Galería, Ubicación y Contacto.
          </li>
          <li>Formulario de contacto.</li>
          <li>Enlace directo a Booking.</li>
          <li>Optimización básica para conversión.</li>
          <li>Dominio + hosting por 1 año.</li>
          <li>Primer mes de administración del sitio incluido.</li>
        </ul>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Multidioma (opcional)</h2>
        <ul class="list-disc space-y-2 pl-5 text-sm text-black/70">
          <li>Idiomas adicionales: Inglés y Alemán.</li>
          <li>Valor: $25.000 + IVA.</li>
          <li>Pago único.</li>
        </ul>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Google Ads</h2>
        <ul class="list-disc space-y-2 pl-5 text-sm text-black/70">
          <li>Administración de campañas.</li>
          <li>Reporte semanal.</li>
          <li>Ajustes al sitio web y mantención general.</li>
          <li>Presupuesto publicitario no incluido.</li>
        </ul>
      </section>

      <section class="mt-10 space-y-2">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Plazo estimado</h2>
        <p class="text-sm text-black/70">
          <strong>Máximo 5 días hábiles</strong> desde la contratación.
        </p>
      </section>

      <section class="mt-10 rounded-[18px] border border-black/10 bg-[#f7f7f7] p-8">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Valor total del proyecto – Sitio web</h2>
        <p class="mt-3 text-2xl font-semibold text-black">$125.000 + IVA</p>
        <p class="mt-2 text-sm text-black/70">
          Pago único. Incluye dominio, hosting y primer mes de administración.
        </p>
      </section>

      <section class="mt-6 rounded-[18px] border border-black/10 bg-[#f7f7f7] p-8">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Valor Multidioma</h2>
        <p class="mt-3 text-2xl font-semibold text-black">$25.000 + IVA</p>
        <p class="mt-2 text-sm text-black/70">Pago único.</p>
      </section>

      <section class="mt-6 rounded-[18px] border border-black/10 bg-[#f7f7f7] p-8">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">
          Valor administración mensual – Google Ads y Sitio Web
        </h2>
        <p class="mt-3 text-2xl font-semibold text-black">$30.000 + IVA mensual</p>
        <p class="mt-2 text-sm text-black/70">
          Administración de campañas, envío de reportes semanales y optimización continua del sitio
          web. Inversión publicitaria no incluida.
        </p>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Forma de pago</h2>
        <ul class="list-disc space-y-2 pl-5 text-sm text-black/70">
          <li>Sitio web: 50% al iniciar – 50% previo a publicación.</li>
          <li>
            Google Ads: incluido el primer mes, luego $30.000 + IVA mensual a partir del segundo
            mes.
          </li>
        </ul>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Consideraciones</h2>
        <ul class="list-disc space-y-2 pl-5 text-sm text-black/70">
          <li>La propuesta considera únicamente el alcance descrito.</li>
          <li>No incluye community management ni gestión de redes sociales.</li>
          <li>No incluye material audiovisual; este debe ser provisto por el cliente.</li>
          <li>
            Cambios o funcionalidades adicionales se cotizan aparte (sistemas de pago, reservas,
            chat en vivo, etc.).
          </li>
        </ul>
      </section>
    </section>
  </div>
</BaseLayout>

<script is:inline>
  const btn = document.getElementById('access-btn')
  const input = document.getElementById('access-input')
  const overlay = document.getElementById('access-overlay')
  const content = document.getElementById('quote-content')
  const error = document.getElementById('access-error')
  const expiredMsg = document.getElementById('expired-msg')

  const issuedAt = new Date('2026-01-17')
  const expiresAt = new Date(issuedAt)
  expiresAt.setDate(expiresAt.getDate() + 15)

  const isExpired = new Date() > expiresAt

  const unlock = () => {
    if (isExpired) {
      input.classList.add('hidden')
      btn.classList.add('hidden')
      expiredMsg.classList.remove('hidden')
      return
    }

    if (input.value === 'spa2026') {
      overlay.classList.add('hidden')
      content.classList.remove('blur-sm')
    } else {
      error.classList.remove('hidden')
    }
  }

  btn.addEventListener('click', unlock)
  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') unlock()
  })
</script>
