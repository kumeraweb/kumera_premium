---
import BaseLayout from '../../layouts/BaseLayout.astro'

const ACCESS_KEY = 'israel2026'
const ISSUE_DATE = new Date('2026-01-16')
const VALID_DAYS = 15

const clientName = 'Estudio de Arquitectura'
const projectName = 'Sitio web institucional'

const formatDateCL = (d) =>
  d.toLocaleDateString('es-CL', { year: 'numeric', month: 'long', day: 'numeric' })

const expiresAt = new Date(ISSUE_DATE)
expiresAt.setDate(expiresAt.getDate() + VALID_DAYS)
---

<BaseLayout
  title={`Cotización – ${clientName} | Kümera`}
  description="Propuesta de diseño y desarrollo web preparada por Kümera para un estudio de arquitectura."
  canonical="https://www.kumeraweb.com/cotizaciones/estudio-arquitectura"
  noindex={true}
>
  <div class="relative min-h-screen bg-white">
    <div
      id="access-overlay"
      class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-6 backdrop-blur"
    >
      <div class="w-full max-w-lg rounded-[18px] bg-white p-8 text-center shadow-[0_22px_45px_rgba(0,0,0,0.12)]">
        <p class="text-[0.7rem] font-semibold uppercase tracking-[0.2em] text-black/50">
          Propuesta privada
        </p>
        <h1 class="mt-3 font-['Space_Grotesk'] text-2xl text-black">Cotización – {clientName}</h1>
        <p class="mt-3 text-sm text-black/70">
          Esta propuesta fue preparada especialmente para su proyecto. Ingrese la clave de acceso
          para visualizarla.
        </p>

        <p id="expired-msg" class="mt-4 hidden text-sm text-red-600">
          Esta cotización ya no se encuentra disponible.
        </p>

        <input
          id="access-input"
          type="password"
          placeholder="Clave de acceso"
          autocomplete="off"
          class="mt-6 w-full rounded-xl border border-black/10 px-4 py-3 text-sm"
        />
        <button
          id="access-btn"
          class="mt-3 w-full rounded-full bg-black px-5 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:opacity-90"
        >
          Acceder
        </button>

        <p id="access-error" class="mt-4 hidden text-sm text-red-600">Clave incorrecta</p>
      </div>
    </div>

    <section id="quote-content" class="mx-auto w-full max-w-[1120px] px-6 py-16 blur-sm md:py-24">
      <section class="space-y-3">
        <p class="text-xs font-semibold uppercase tracking-[0.26em] text-black/40">
          Cotización preliminar
        </p>
        <h1 class="font-['Space_Grotesk'] text-3xl tracking-tight text-black md:text-4xl">
          Diseño y desarrollo de sitio web para estudio de arquitectura
        </h1>
        <p class="max-w-2xl text-sm text-black/70 md:text-base">
          Propuesta para el desarrollo de un sitio web informativo, simple y minimalista, enfocado
          en la exhibición de proyectos y contacto.
        </p>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Información general</h2>
        <ul class="space-y-2 text-sm text-black/70">
          <li><strong>Cliente:</strong> {clientName}</li>
          <li><strong>Proyecto:</strong> {projectName}</li>
          <li><strong>Proveedor:</strong> Kümera – Servicios Digitales</li>
          <li><strong>Fecha de emisión:</strong> {formatDateCL(ISSUE_DATE)}</li>
          <li><strong>Validez:</strong> {VALID_DAYS} días (hasta {formatDateCL(expiresAt)})</li>
        </ul>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Alcance del proyecto</h2>
        <ul class="list-disc space-y-2 pl-5 text-sm text-black/70">
          <li>Sitio web responsive (desktop y mobile).</li>
          <li>Hasta <strong>4 secciones</strong>: Inicio, Proyectos, Nosotros y Contacto.</li>
          <li>Diseño visual minimalista alineado a la referencia compartida.</li>
          <li>
            Sección <strong>Proyectos</strong> autoadministrable con:
            <ul class="mt-2 list-disc space-y-1 pl-5">
              <li>Imágenes</li>
              <li>Descripción breve</li>
              <li>Ubicación</li>
              <li>Año</li>
              <li>Categoría</li>
              <li>Metros cuadrados</li>
            </ul>
          </li>
          <li>Panel simple para subir y editar proyectos.</li>
          <li>Publicación del sitio y configuración inicial.</li>
        </ul>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Proceso de trabajo</h2>
        <ol class="list-decimal space-y-2 pl-5 text-sm text-black/70">
          <li>Diseño del template base (estructura, tipografías y paleta de colores).</li>
          <li>Revisión y ajustes (hasta 2 rondas).</li>
          <li>Implementación final y carga de proyectos iniciales.</li>
          <li>Publicación del sitio.</li>
        </ol>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Dominio y hosting</h2>
        <p class="text-sm text-black/70">
          Esta propuesta <strong>incluye hosting básico</strong>, suficiente para el correcto
          funcionamiento y rendimiento del sitio web.
        </p>
        <p class="text-sm text-black/70">
          El servicio de hosting <strong>no incluye correos corporativos</strong>.
        </p>
        <p class="text-sm text-black/70">
          La propuesta <strong>incluye un dominio por 1 año</strong>, gestionado por Kümera.
        </p>
        <p class="text-sm text-black/70">
          En caso de requerir correos corporativos (ej: contacto@tudominio.cl), deben indicarlo
          para cotizar la mejor alternativa disponible a bajo costo. Este servicio corresponde a un
          <strong>costo anual</strong> asociado a un proveedor externo.
        </p>
      </section>

      <section class="mt-10 space-y-2">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Plazo estimado</h2>
        <p class="text-sm text-black/70">
          <strong>7 a 10 días hábiles</strong> desde la aprobación del diseño inicial.
        </p>
      </section>

      <section class="mt-10 rounded-[18px] border border-black/10 bg-[#f7f7f7] p-8">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Valor total del proyecto</h2>
        <p class="mt-3 text-2xl font-semibold text-black">$110.000 CLP</p>
        <p class="mt-2 text-sm text-black/70">
          Incluye hosting básico y dominio por 1 año. No incluye correos corporativos.
        </p>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Forma de pago</h2>
        <ul class="list-disc space-y-2 pl-5 text-sm text-black/70">
          <li>50% al iniciar el proyecto.</li>
          <li>50% contra entrega y publicación.</li>
        </ul>
      </section>

      <section class="mt-10 space-y-3">
        <h2 class="font-['Space_Grotesk'] text-xl text-black">Consideraciones</h2>
        <ul class="list-disc space-y-2 pl-5 text-sm text-black/70">
          <li>La propuesta considera únicamente el alcance descrito.</li>
          <li>Cambios o funcionalidades adicionales se cotizan aparte.</li>
          <li>Incluye acompañamiento inicial post-publicación para ajustes menores.</li>
        </ul>
      </section>
    </section>
  </div>
</BaseLayout>

<script is:inline>
  const btn = document.getElementById('access-btn')
  const input = document.getElementById('access-input')
  const overlay = document.getElementById('access-overlay')
  const content = document.getElementById('quote-content')
  const error = document.getElementById('access-error')
  const expiredMsg = document.getElementById('expired-msg')

  const issuedAt = new Date('2026-01-16')
  const expiresAt = new Date(issuedAt)
  expiresAt.setDate(expiresAt.getDate() + 15)

  const isExpired = new Date() > expiresAt

  const unlock = () => {
    if (isExpired) {
      input.classList.add('hidden')
      btn.classList.add('hidden')
      expiredMsg.classList.remove('hidden')
      return
    }

    if (input.value === 'israel2026') {
      overlay.classList.add('hidden')
      content.classList.remove('blur-sm')
    } else {
      error.classList.remove('hidden')
    }
  }

  btn.addEventListener('click', unlock)
  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') unlock()
  })
</script>
